---
vcsPath: classifieds/docs/tech/principles/tech-debt.md
---
# Управление техническим долгом

Набор принципов для управления техническим долгом в синергии с бизнесом, а не вопреки нему.

Принципы работают только с соблюдением основного кредо: «**лучше не сделать новый техдолг, чем исправить старый**». Из него выводятся решения, повышающие продуктивность и удовлетворённость команды без многомесячных рефакторингов. Например, предпочтение небольших сервисов большим, «фиксация убытков» в отношении старых систем, тщательное дизайн-ревью новых решений. Так или иначе, снизить скорость прирастания легаси всегда лучше, чем остановить бизнес в тщетной попытке избавиться от него вовсе.

## Испытание легаси о бизнес-необходимость
Это упражнение стоит делать при каждом подходе к легаси, чтобы избежать борьбы с ветряными мельницами.

![Legacy diagram](legacy-diagram.svg)

Разработке действительно хочется сделать как лучше. И с нашей точки зрения кажется, что все системы в плохом состоянии вредны одинаково. Но тут и кроется ловушка: на самом деле система может очень плохо работать, но при этом полностью соответствовать ожиданиям бизнеса от неё. Чтобы не тратить нервные клетки и время на ненужную работу, надо испытывать каждое желание исправить техдолг о бизнес-необходимость. Вполне возможно, что проблема на самом деле кроется в раздражённости команды от необходимости взаимодействовать с легаси. В таком случае надо исправлять именно его, а не пытаться системно вылечить болезнь там, где достаточно спрятать симптомы от разработчиков: писать новую логику в новых микросервисах, сделать админку или гайдлайн со скриптами для рутинных операций, погрумить проблемы внутри команды или любым другим способом добиться повышения комфорта программистов.

Принятию подобных решений помогает выражение технических работ в деньгах и ресурсах. Если приблизительно оценить стоимость переписывания большой системы, может выясниться, что оно никогда не окупится. В таком случае правильнее будет вложиться в способы снижения неудобств для разработчиков. Если же переписывание окупается, то об этом стоит поговорить с бизнесом.

## Непрерывность работы
Если техдолг решено устранить, то на это в любом случае потребуется выделение ресурсов команды. Хорошо, если это будет просто некоторое количество FTE, которые снизят пропускную способность команды на ограниченное время. Даже в этом случае к такому проекту должно быть ответственное отношение, чтобы он не превратился в долгострой. Плохо, если помимо этого работа над техдолгом блокирует наращивание новых возможностей ПО на продолжительное время. **Основная интеллектуальная работа руководителя на старте проекта должна протекать в ключе минимизации блокирующего влияния на бизнес**.

## Мыслить проектами, а не кодом
Если при работе с техдолгом оперировать сложно написанными кусками кода и задачами на их рефакторинг, можно очень быстро утонуть. Рефакторинг кода эффективнее встраивать в культуру разработки, чтобы он происходил непрерывно при ежедневной работе программиста. Для управления техническим долгом с точки зрения *руководителя* атомарной единицей является не код, а архитектурная проблема.

Особняком стоят непрерывные процессы обеспечения качества, которые выражаются в метриках. Например, количество инцидентов, время реагирования и ущерб от них, количество обращений в саппорт. К таким метрикам тоже можно сводить совокупности технических проблем, чтобы обсуждать допустимые пороги с бизнесом и держать их под контролем.

## Руководитель знает свой техдолг
Руководитель должен чётко представлять себе ландшафт легаси в своей зоне ответственности. Для этого надо вести карту технических проектов, классифицировать их по важности и срочности, указывать задачи на устранение. Можно собирать регулярные синки по техдолгу, актуализировать карту, планировать следующие итерации работы.

Для такой карты подходит Трекер, Вики или любое другое общедоступное место. Главное, чтобы в любой момент времени можно было понять состояние проблемных технологий в команде.

## У задачи есть заказчик
Технические задачи конкурируют с продуктовыми. При этом у продуктовых задач всегда есть профессиональный заказчик, работа и компетенция которого — довести задачу до результата. Разработке тоже нужно использовать методы проектного управления в отношении своих задач, чтобы не выглядеть проигрышно на фоне продукта. Приносить не жалобы и плохо проработанные идеи, а полноценные задачи с обоснованием и *заказчиком*. Заказчик технической задачи выполняет функции и: собирает и валидирует требования, следит за проектной работой, синхронизирует команды, питчит проект. При таком подходе технические задачи перестанут выглядеть блекло на фоне продуктовых. Но это необходимое, а не достаточное условие.

## Бизнес-обоснование
Каждая техническая задача должна иметь синергию со стратегией компании. Если между бизнесом и техдолгом нельзя установить соответствие, то такой проект делать не надо, поскольку он является скорее ложным перфекционизмом, чем реальной необходимостью.

Идеальная ситуация — это **настолько мощное бизнес-обоснование, что заказчиком исправления техдолга становится кто-то из бизнеса**. В таком случае снимается половина головной боли с разработки. Обычно такое достигается, когда техдолг совпадает с проблемной частью бизнес-процессов.

Помимо этого стоит понимать, что с точки зрения бизнеса технические проекты — это **вложения в инфраструктуру**. Соответственно правильный подход к техдолгу — это поиск ответа на вопрос «сколько ресурсов мы готовы аллоцировать под укрепление инфраструктуры в этой части компании?». На этот вопрос не могут ответить отдельно ни руководитель разработки, ни продакт — поэтому им надо работать вместе.

## Коммуникации
Без налаженных коммуникаций между бизнесом и разработкой продуктивная работа над техническими задачами невозможна. Поэтому нужен **непрерывный** диалог между главами продукта и разработки. Естественно, он полезен не только для техдолга, но здесь он нам интересен, потому что без него бизнес никогда не получит реального понимания того, в каком состоянии находится разработка. Если продукт понимает, какие технические преграды стоят на пути, а разработка понимает, во что бизнес будет вкладываться, цели технического развития встанут в соответствие стратегии компании.

## Квотирование
Одним из способов работы с техническим долгом является квотирование некоторого процента FTE или ёмкости команды на технические нужды. Это рабочий способ, но к нему стоит относиться с осторожностью: квотирование упрощает распределение ресурсов, но снижает гибкость команды. Если важно уметь максимально быстро реагировать на новые продуктовые возможности, оно может стать помехой. С другой стороны, квоты полезны при необходимости непрерывно работать над каким-то направлением, например, устранять причины инцидентов. То есть принятие решении о квоте должно быть обдуманным и соблюдать интересы бизнеса.
